{% extends 'base.html.twig' %}

{% block metadescription %}{% endblock %}
{% block title %}Nos produits{% endblock %}

{% block body %}
<div class="container-fluid pb-5 mt-5">
    <div class="row">
        <div class="mt-2 col-lg-2 col-md-2 col-sm-10 pt-3 mx-auto card-filter">
            <h3 class="filter-title mt-2">Filtres</h3>
            {{form_start(searchForm, {attr: {class:'filter'}})}}
            <div class="pt-2">
                {{form_row(searchForm.q)}}
            </div>
            <div class="pb-3 pt-3">
                <button type="submit" class="btn-filtre btn text-center nav-item nav-link-button bg-warning"> Rechercher</button>
            </div>
            <hr />
            <div>
                <div id="headingTwo">
                    <h3 class="filter-title mt-5">Catégories</h3>
                    {{ form_row(searchForm.category, {
                    "attr": {
                    'class': 'selectpicker',
                    'data-live-search': true,
                    'data-selected-text-format': 'count > 1',
                    'data-count-selected-text': '{0} sélectionnés',
                    'data-actions-box': true,
                    'title': 'Sélectionner'
                    }
                    }) }}
                </div>
            </div>
            <div class="pb-3">
                <button type="submit" class="btn-filtre btn text-center nav-item nav-link-button mt-3 bg-warning">Filtrer</button>
            </div>
            {{form_end(searchForm)}}
        </div>
        <div class="col-lg-10 col-md-8">
            <div class="row mt-3 ml-1">
                <h1 class="text-subnav m-3 block-title">Nos produits</h1>
            </div>
            <div class="row">
                {% for product in products %}
                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12 my-3 mt-4">
                    <div class="card-wrapper">
                        <img src="/uploads/images/{{ product.image }}" style="width: 18rem;" class="img-fluid text-center" id="profil" alt="{{ product.name }}" width="75%">
                        <div class="text-left">
                            <button class="btn border-pres pl-3 pr-3">
                                <h4>
                                    <i class="far fa-heart like-icon"></i>
                                </h4>
                            </button>
                        </div>
                        <div class="card-body">
                            <a href="{{path ('product_show', {'slug': product.slug})}}" class="link-for-show">
                                <h4 class="product-name text-warning">
                                    {{ product.name }}
                                </h4>
                                <hr />
                                <p class="product-price text-left">{{product.price}}€</p>
                                <p class="product-description text-right">{{product.description|u.truncate(60, '...')
                                    }}</p>
                                <div class="text-left">
                                    <a href="{{path('cart_add', {'id' : product.id})}}"
                                        class="btn-filtre btn text-center nav-item nav-link-button bg-warning">
                                        Ajouter<i class="fab fa-opencart text-dark"></i></a>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="navigation">
                {{ knp_pagination_render(products) }}
            </div>
        </div>
    </div>
</div>
<hr>
{% endblock %}
